<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>genSub</title>
    <script>
        function gen({ backend, vendor }) {
            const url = document.querySelector("#url").value
            const suffix = (vendor == "default") ? "" : "_" + vendor
            document.querySelector("#result").value = `https://${backend}/sub?target=clash&new_name=true&url=${encodeURIComponent(url)}&insert=false&interval=21600&config=https%3A%2F%2Fxiakele.github.io%2Fcustom_config${suffix}.ini`
        }
        function copy() {
            let result = document.querySelector("#result")
            result.select()
            document.execCommand("copy")
        }
    </script>
    <style>
        input,
        button {
            margin: 3px;
            height: 1.5em;
        }

        input {
            width: 50em;
        }

        button {
            width: 5em;
        }
    </style>
</head>

<body>
    <label for="backend">后端：</label>
    <select id="backend">
        <option value="api.tsutsu.one" selected>tsutsu</option>
        <option value="sub.xeton.dev">xeton</option>
    </select>
    <label for="choice">配置文件：</label>
    <select id="choice">
        <option value="default" selected>default</option>
        <option value="xfss">xfss</option>
        <option value="yy">一元机场</option>
    </select>

    <br>
    <input type="url" id="url">
    <button onclick=readChoice()>submit</button>
    <script>
        function readChoice() {
            const backend = document.querySelector('#backend')
            const select = document.querySelector("#choice")
            const config = {
                backend: backend.options[backend.selectedIndex].value,
                vendor: select.options[select.selectedIndex].value
            }
            gen(config)
        }
    </script>
    <br>
    <input type="url" id="result" readonly="readonly">
    <button onclick=copy()>copy</button>
    <script>
        document.querySelector("#url").value = ""
        document.querySelector("#result").value = ""
    </script>
</body>

</html>